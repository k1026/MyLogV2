
## Skill: tdd-strict (Step 3: Refactor & Cleanup)
- **Goal**: Step 2 での修正箇所を中心に、型安全性の検証と最適化を行う。
- **Rules**:
    1. **Target Identification**: 直前の `tdd-fix` で変更されたコード行を正確に特定し、そこをスキャン対象とする。
    2. **Compliance Check**: 
       - 修正箇所に `any` が含まれていないか？
       - `unknown` からのキャストは適切か？
       - Zodスキーマとの型矛盾はないか？
    3. **Conditioned Report**:
       - **全ての基準を満たす場合**: 「検証完了。型定義とロジックの整合性を確認しました」と報告すること。
       - **問題がある場合**: 「検証の結果、[具体的な問題点] が見つかりました。修正案を提示します」と述べ、合格するまで Step 3 を完遂しないこと。
    4. 最後に必ず停止し、ユーザーに次のタスク（次の機能のStep 1など）を確認すること。