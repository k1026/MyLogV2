---
name: tdd-refine
description: 既存のテストを、実行速度を維持したまま「リファクタリング耐性」と「検知能力」の高いものへアップグレードし、テスト効率も向上させます。
---

## 目的 (Goal)
既存のテストを、実行速度を維持したまま「リファクタリング耐性」と「検知能力」の高いものへアップグレードし、テスト効率も考慮する。

## ルールと制約 (Rules & Constraints)
0. **本スキルはテストを洗練するためのものでありテストの実行は行わなくて良い**
1. **Implementation Agnostic**: 実装の内部変数やプライベートメソッドを直接検証している箇所を、公開インターフェース経由の「振る舞い検証」に書き換える。
2. **Boundary Scan**: 正常系のテスト値を、最小値(min)、最大値(max)、無効値(null/empty)などの境界値に差し替える。
3. **Logical Coverage**: `if/else` のすべての分岐を最小限のケースで通るように整理し、冗長なセットアップコードを削除する。
4. **No Side Effects**: テスト間で状態を共有せず、高速に並列実行できる構成を維持する。
5. **Equivalence Class**: 各入力グループから代表値を1つ選んでいるか？
6. **Boundary Value**: 境界値（n-1, n, n+1）を網羅しているか？
7. **Idempotency**: 同じ操作を2回繰り返しても副作用がないか？
8. **Zero/Null/Empty**: 配列が空、文字列が空、数値が0の場合を考慮しているか？
9. **Test optimization**: テスト対象に応じてテストパターンを増減しテストの確実性と効率を高めること。効果の低いテストや不要になったテストは適宜削除すること。
