
 RUN  v4.0.18 C:/tojiro/programming/AG/MyLogV2

 ❯ app/components/cell/TaskCell.test.tsx (10 tests | 6 failed) 25521ms
     ✓ 初期表示: name と value (チェック状態) が正しく表示されること  361ms
     ✓ チェックボックスをクリックすると onSave が即座に呼ばれること 54ms
     ✓ nameを編集してblurするとonSaveが呼ばれること 12ms
     ✓ コンテナをクリックするとタイトルのテキストフィールドにフォーカスが当たり、テキストが全選択されること 8ms
     × 過剰なフォーカス奪取の防止: isNew=trueでも、一度フォーカスが外れたら再取得しないこと 20ms
       × 新規セル追加時に自動で推定結果の1位がセットされること 5013ms
       × 新規セル追加時に候補チップが表示されること 5005ms
       × 候補チップをクリックするとタイトルが更新され、チップが消えること 5017ms
       × 手動で入力すると候補チップが消えること 5017ms
     × 競合状態の防止: 推定処理中にユーザーが入力を開始した場合、推定結果で上書きされないこと 5010ms

⎯⎯⎯⎯⎯⎯⎯ Failed Tests 6 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  app/components/cell/TaskCell.test.tsx > TaskCell > 過剰なフォーカス奪取の防止: isNew=trueでも、一度フォーカスが外れたら再取得しないこと
Error: expect(element).not.toHaveFocus()

Received element is focused:
  <input
  class="bg-transparent border-b-2 border-transparent outline-none transition-all duration-300 text-left font-bold text-[20px] p-3 rounded-none placeholder:text-slate-400 flex-1 w-full focus:border-purple-500 text-slate-800"
  placeholder="To-do Task"
  type="text"
  value="New Task"
/>
 ❯ app/components/cell/TaskCell.test.tsx:104:31
    102|         // ユーザーが脱出
    103|         fireEvent.blur(nameInput);
    104|         expect(nameInput).not.toHaveFocus();
       |                               ^
    105| 
    106|         // 再レンダリング (isNew=true のまま)

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/6]⎯

 FAIL  app/components/cell/TaskCell.test.tsx > TaskCell > 推定機能 (Estimation) > 新規セル追加時に自動で推定結果の1位がセットされること
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ app/components/cell/TaskCell.test.tsx:119:9
    117| 
    118|     describe('推定機能 (Estimation)', () => {
    119|         it('新規セル追加時に自動で推定結果の1位がセットされること', async () => {
       |         ^
    120|             const cell = new Cell({ ...baseCell, name: '', value: 'fal…
    121|             render(<TaskCell cell={cell} onSave={mockSave} isNew={true…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/6]⎯

 FAIL  app/components/cell/TaskCell.test.tsx > TaskCell > 推定機能 (Estimation) > 新規セル追加時に候補チップが表示されること
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ app/components/cell/TaskCell.test.tsx:128:9
    126|         });
    127| 
    128|         it('新規セル追加時に候補チップが表示されること', async () => {
       |         ^
    129|             const cell = new Cell({ ...baseCell, name: '', value: 'fal…
    130|             render(<TaskCell cell={cell} onSave={mockSave} isNew={true…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/6]⎯

 FAIL  app/components/cell/TaskCell.test.tsx > TaskCell > 推定機能 (Estimation) > 候補チップをクリックするとタイトルが更新され、チップが消えること
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ app/components/cell/TaskCell.test.tsx:137:9
    135|         });
    136| 
    137|         it('候補チップをクリックするとタイトルが更新され、チップが消えること', async () => {
       |         ^
    138|             const cell = new Cell({ ...baseCell, name: '', value: 'fal…
    139|             render(<TaskCell cell={cell} onSave={mockSave} isNew={true…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/6]⎯

 FAIL  app/components/cell/TaskCell.test.tsx > TaskCell > 推定機能 (Estimation) > 手動で入力すると候補チップが消えること
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ app/components/cell/TaskCell.test.tsx:149:9
    147|         });
    148| 
    149|         it('手動で入力すると候補チップが消えること', async () => {
       |         ^
    150|             const cell = new Cell({ ...baseCell, name: '', value: 'fal…
    151|             render(<TaskCell cell={cell} onSave={mockSave} isNew={true…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/6]⎯

 FAIL  app/components/cell/TaskCell.test.tsx > TaskCell > 競合状態の防止: 推定処理中にユーザーが入力を開始した場合、推定結果で上書きされないこと
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ app/components/cell/TaskCell.test.tsx:162:5
    160|     });
    161| 
    162|     it('競合状態の防止: 推定処理中にユーザーが入力を開始した場合、推定結果で上書きされないこと', async () => {
       |     ^
    163|         // estimateが少し遅れるように遅延させる
    164|         mockEstimate.mockImplementation(async () => {

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/6]⎯


 Test Files  1 failed (1)
      Tests  6 failed | 4 passed (10)
   Start at  15:50:19
   Duration  29.97s (transform 242ms, setup 451ms, import 867ms, tests 25.52s, environment 2.38s)

