# 4. セルUI (Cell UI)

セルUIは情報単位であるCellの表示・編集を行うUI。

## 4.1 基本構成 (Basic Structure)

### 4.1.1 共通デザイン (Common Design)
以下は共通デザインであり、指定がない場合はこれを適用する。
**デザイン・配色**
- **背景色**：背景はrgba(255, 255, 255, 0.6) (透明度40%の白)の半透明の白色 (Timeセルは透明)
- **枠線**：枠線は細い白色
- **フォーカス時**: 入力フィールドの下線が紫色 (Purple) に変化
- **テキスト表示**: 折り返し表示を許可
- **テキスト配置**: 全ての入力フィールドにおいて左詰めとする
- **高さ**: コンテンツ量に応じた自動調整（可変高さ）
- **角**：背景の角を丸める (Timeセルは丸めない)
- **入力フィールド**: 角は丸めない

**フォント・文字サイズ**
- **セルタイトル (基本)**: 20px
- **セルタイトル (Timeセル)**: 14px
- **セル値 (Value)**: 18px
- **生成時刻表示**: 10px
- **プレースホルダー**: 上記サイズに準拠

**レイアウト (Layout)**
- **セル間の間隔 (Gap)**: 12px

### 4.1.2 共通の挙動
**自動保存 (Auto Save)**：フォーカスが外れた場合や入力が完了したタイミングで、データベースへ自動的に保存・更新する
**操作禁止メンバ**：`Cell`クラスの`geo`と`remove`メンバはユーザーからは直接値を操作しない。編集UIも提供しない。


## 4.2 セルタイプ別仕様 (Specs by Cell Type)

### 4.2.0 カードセル(Card Cell)
Attribute：`Card`

**Cardセルに関しては別途仕様書を用意するのでこの仕様書では実装を意識しなくて良い**

### 4.2.1 タイムセル (Time Cell)
Attribute: `Time`
**入力フィールド**
- **UI配置**：`name`と`value`のUIは縦に並べ間のスペースは2pxに設定する。
- **タイトル**：テキストフィールドに`name`の値を文字列で表示・編集。セル生成時にはデフォルト値が入っている。
- **値**：年月日選択UIと時刻選択UIに`value`の値を表示し横に並べる。セル生成時にはデフォルト値が入っている。
  - 年月日選択UIと時刻選択UIにはテキストボックスを使用し、`value`の値を文字列で表示・編集する。テキストボックスをクリックするとそれぞれの日付時刻選択UIを表示する。
- **UIデザイン**：
  - 角は丸めない
  - セル背景と各入力フィールドの背景色を透明にし枠線は非表示にする
  - タップ時なども背景は透明のままにする
  - 各入力フィールドの文字は白色にする
  - 各入力フィールドは左詰めにし横幅は内容の文字数に揃えて詰めること
    - 年月日選択UIと時刻選択UIの間隔は2px

### 4.2.2 テキストセル (Text Cell)
Attribute：`Text`

**入力フィールド**
  - **タイトル**：改行なしのテキストフィールドに`name`の値を文字列で表示・編集
  　- タイトルのテキストフィールド内で改行キーを押したら値のテキストフィールドにフォーカスする
  - **値**：改行ありのテキストフィールドに`value`の値を文字列で表示・編集
  - **UI配置**：`name`と`value`のUIは縦に並べる
  - **空のフィールド**：セルUIにフォーカスがない（セル外部をクリックした）時、タイトルや値が空の場合はその入力フィールドは非表示にする。
    - **編集領域の確保**: フィールドが非表示の状態でも、セル全体の背景領域（最小高さ 4rem）は常にクリック（選択）可能。
  - **フォーカス制御**:
    - **初期フォーカス**: セルUIを選択（タップ）した際、`name`と`value`のうちテキストが空である方に自動的にフォーカスする。両方入力済みの場合は`value`に、両方空の場合は`name`にフォーカスする。
    - **連動保持**: タイトルと値の間でフォーカスを移動しても編集モード（表示状態）は維持される。
    - **アンダーライン**: フォーカス時、入力フィールドの下線が紫色（Purple）に変化し、アクティブ状態を明示する。

### 4.2.3 タスクセル (Task Cell)
Attribute: `Task`
-**入力フィールド**
  - **タイトル**：テキストフィールドに`name`の値を文字列で表示・編集
  - **値**：チェックボックスを表示し`value`の値によるタスクの完了状態を表示・操作。チェックボックスには淡い紫色の枠を表示する。
  - **UI配置**：`value`→`name`の順でUIを横に並べる
  - **フォーカス制御**: タスクセルUIの選択・新規追加時にはタイトルのテキストフィールドにフォーカス
  　- テキストフィールドにテキストがある場合はテキストを全選択し入力カーソルを末尾に配置
  - **デザイン**：チェックボックスの角の丸みは5pxとする。
