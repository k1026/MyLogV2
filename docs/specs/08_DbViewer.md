# 8. データ閲覧・管理 (DbViewer)

アプリケーションのデータを格納しているデータベースの中身をユーザーが確認するためのビューアーUIを提供する。

# レイアウト
- **[全体]**：垂直 (ダイアログ)
  - **[右上]**：固定
    - ❌ 閉じるボタン
  - **[中央]**：垂直 (コンテンツ)
    - **[上部]**：垂直 (ヘッダー)
      - 🖼️ ロゴ (LOCALラベル + アイコン + サービス名)
      - **[中段]**：水平 (操作ツールバー)
        - 🗑️ DeleteDBボタン
        - ➕ Appendボタン
        - 📤 Exportボタン
    - **[下部]**：垂直 (データ表示エリア)
      - **[情報]**：水平 (ステータスバー)
        - 🔢 アイテム数
        - 📄 ページ切り替え・番号
      - **[一覧]**：スクロール
        - 📋 データベースリスト

## 共通仕様
**名称**：DbViewerダイアログ、
**種類**：ダイアログ、
**用途**：DBデータの閲覧・管理、
**形状**：角丸、他のダイアログと共通、
**寸法**：画面中央に配置、
**文字**：標準フォント、
**色彩**：背景は白、枠線は薄紫、
**装飾**：背景オーバーレイ、
**配置**：画面中央、
**状態**：表示/非表示、
**挙動**：フェードイン表示、

## 閉じるボタン
**名称**：閉じるボタン、
**種類**：アイコンボタン、
**用途**：ダイアログを閉じる、
**形状**：正方形、
**寸法**：標準サイズ、
**文字**：なし、
**色彩**：白地、薄紫の「×」アイコン、
**装飾**：なし、
**配置**：ダイアログ内右上、
**状態**：ホバー、アクティブ、
**挙動**：
- タップでダイアログを閉じる。
- Escキーや戻るボタンでもダイアログを閉じる。
- ダイアログを閉じたタイミングでカードリストを更新する。

## ロゴ
**名称**：ロゴ、
**種類**：コンポーネント、
**用途**：タイトル表示、
**形状**：なし、
**寸法**：なし、
**文字**：中央上部に「Database」(太字)、さらにその上部に「LOCAL」(薄い、小さい)、
**色彩**：指定なし、
**装飾**：左側にデータベースアイコンを配置、
**配置**：中央上部、
**状態**：固定、
**挙動**：なし、

## 操作ボタン共通
**名称**：操作ボタン、
**種類**：テキストボタン、
**用途**：データ操作実行、
**形状**：薄い枠線、角丸、
**寸法**：なし、
**文字**：ボタン内に配置、
**色彩**：通常時は白背景 + ボタン色(赤/紫)の文字・枠線、
**装飾**：なし、
**配置**：ロゴ下部に横並び、
**状態**：タップまたは処理実行中は「塗りつぶし色：反転(ボタン色)」「文字：白」に変化、
**挙動**：処理完了まで反転状態を維持、

## DeleteDBボタン
**名称**：DeleteDB、
**種類**：操作ボタン、
**用途**：データベースの全削除、
**形状**：共通仕様に準拠、
**色彩**：赤地に白文字、
**状態**：
- 実行前に警告ダイアログを表示、
- 実行中に%やプログレスバーは**表示しない**
**挙動**：DBクリア、

## Appendボタン
**名称**：Append、
**種類**：操作ボタン、
**用途**：データの追加、
**形状**：共通仕様に準拠、
**色彩**：白地に紫文字で、選択時と実行中は反転。
**状態**：
- 実行中は%つきのプログレスバーと中止ボタンを表示、
- 完了時は読み込み件数と読み込み失敗件数、中止分の件数を表示
**挙動**：
- ファイルダイアログを開いて指定ファイルを読み込み、
- 中止時は読み込んだ分は保存、未読み込み分は破棄する。DBや読み込みファイルが壊れないように注意、

## Exportボタン
**名称**：Export、
**種類**：操作ボタン、
**用途**：データのエクスポート、
**形状**：共通仕様に準拠、
**色彩**：白地に紫文字で、選択時と実行中は反転。
**状態**：
- 実行中は%つきのプログレスバーと中止ボタンを表示、
- 完了時は出力件数と失敗件数、中止分の件数を表示、
**挙動**：
- フォルダはデフォルトのダウンロードにそのまま出力、
- 中止時もDBや出力ファイルが壊れないように注意、

## アイテム数
**名称**：アイテム数、
**種類**：テキスト、
**用途**：表示しているDB内の総データ件数の表示、
**文字**：標準サイズ、左詰め
**色彩**：標準、
**配置**：リスト左上に左詰め、

## ページ切り替え・番号
**名称**：ページコントロール、
**種類**：コントロール、
**用途**：表示ページ移動、
**文字**：
- (現在のページ)/(ページ総数) 形式でページ選択アイコンの間に表示、
- 「現在のページ番号」の文字色は紫、「/」と「ページ総数」は薄い灰色
**色彩**：
- 紫色の「<」と「>」をページ選択アイコンとして両端に表示。
- 端に到達時は選択アイコンをグレーアウト、
- 背景なし、
**配置**：リスト上部、中央、
**状態**：グレーアウト(端到達時)、
**挙動**：
- 現在のページ番号クリックで数値の直接入力、
- ページ番号の増加ボタンなどは不要

## データベースリスト
**名称**：データベースリスト、
**種類**：データテーブル、
**用途**：レコード単位のデータ閲覧、
**形状**：100件ずつのレコード表示、
**文字**：標準サイズ、左から「ID」、「GPS」、「ATTRIBUTE」、「NAME」、「VALUE」、「REMOVE」のカラム順、
**配置**：ステータスバー下部、
**状態**：100件ずつ表示。IDが新しい順に並べる、
**挙動**：縦横スクロール可能、

# ロジック・挙動

## 起動時の動作
- ダイアログ起動時、DBの先頭(最新ID)から100件ずつデータを読み込んで表示する。
- 読み込み中はリング上の読み込みアニメーションを表示する

## データ処理中の動作
- データ読み込み中はダイアログ全体を白っぽく表示して中止操作以外を無効化する。